webpackJsonp([10],{ORDV:function(t,a){},gkdw:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("mvHQ"),i=e.n(n),o=e("gyMJ"),c=e("BUS2"),s=e.n(c),d={data:function(){return{headers:{"Content-Type":"multipart/form-data"},AdminFlagSelect:[{AdminFlag:"1",label:"等级一"},{AdminFlag:"2",label:"等级二"},{AdminFlag:"3",label:"等级三"}],adminAccountList:[],openAddAdminAccountDialog:!1,openUpdateAdminAccountDialog:!1,newAdminAccountFrom:{AdminName:"",AdminAccount:"",AdminPwd:"asdzxc456",AdminFlag:"1",AdminAvatar:"public/upload/img/adminAvatar/default_admin_avatar.png"},updateAdminAccountFrom:{AdminName:"",AdminFlag:"",AdminAvatar:""},newAdminAccountFromRules:{AdminName:[{required:!0,message:"请输入新增的管理员昵称",trigger:"blur"}],AdminAccount:[{required:!0,message:"请输入新增的管理员账号",trigger:"blur"}]}}},created:function(){this.getAllAcount()},methods:{getAllAcount:function(){var t=this,a=this.$loading({lock:!0,text:"正在请求账号列表中",background:"rgba(0, 0, 0, 0.2)"});o.e().then(function(e){0===e.data.code?(t.$message.success(e.data.message),a.close(),t.adminAccountList=e.data.data.accountList):(t.$message.error(e.data.message),a.close())}).catch(function(){t.$message.error("获取账号列表失败"),a.close()})},addAdminAccount:function(t){var a=this;this.$refs[t].validate(function(e){if(!e)return console.log("error submit!!"),!1;var n=a.$loading({lock:!0,text:"正在添加管理员账号中",background:"rgba(0, 0, 0, 0.2)"});a.newAdminAccountFrom.AdminPwd=s()(a.newAdminAccountFrom.AdminPwd),o.a(a.newAdminAccountFrom).then(function(e){0===e.data.code?(a.$message.success(e.data.message),n.close(),a.closeAddAdminAccountDialog(t),a.getAllAcount()):(a.$message.error(e.data.message),n.close())}).catch(function(){a.$message.error("添加管理员账号失败，请重试"),n.close()})})},deleteAdminAccount:function(t){var a=this;this.$confirm("此操作将永久删除该账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=a.$loading({lock:!0,text:"正在删除管理员账号",background:"rgba(0, 0, 0, 0.2)"});o.u({adminId:t}).then(function(t){0===t.data.code?(a.$message.success(t.data.message),e.close(),a.getAllAcount()):(a.$message.error(t.data.message),e.close())}).catch(function(){a.$message.error("删除管理员账号失败, 请重试"),e.close()})}).catch(function(){a.$message.info("已取消删除")})},adminStatusChange:function(t,a){var e=this,n=this.$loading({lock:!0,text:"正在更新账号状态",background:"rgba(0, 0, 0, 0.2)"});o.p({AdminStatus:t,AdminId:a}).then(function(t){0===t.data.code?(e.$message.success(t.data.message),n.close(),e.getAllAcount()):(e.$message.error(t.data.message),n.close())}).catch(function(){e.$message.error("更新账号状态失败, 请重试"),n.close()})},handleAvatarSuccess:function(t,a){0===t.code?(this.$message.success("上传头像成功"),this.newAdminAccountFrom.AdminAvatar=t.data.Filepath):this.$message.error("上传头像失败")},updateHandleAvatarSuccess:function(t,a){0===t.code?(this.$message.success("上传头像成功"),this.updateAdminAccountFrom.AdminAvatar=t.data.Filepath):this.$message.error("上传头像失败")},uploadActive:function(t,a){},beforeAvatarUpload:function(t){var a="image/jpeg"===t.type||"image/png"===t.type,e=t.size/1024/1024<2;return a||this.$message.error("上传头像图片只能是 JPG 或者 PNG 格式!"),e||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&e},uploadsError:function(t,a,e){this.$message.error("上传头像失败, 请重试")},submitAvatar:function(){this.$refs.uploadsAvatar.submit()},closeAddAdminAccountDialog:function(t){this.openAddAdminAccountDialog=!1,this.newAdminAccountFrom.AdminFlag="1",this.newAdminAccountFrom.AdminAvatar="public/upload/img/adminAvatar/default_admin_avatar.png",this.$refs[t].resetFields()},openUpdateAdminAccountDialogFn:function(t){this.updateAdminAccountFrom=JSON.parse(i()(t)),this.openUpdateAdminAccountDialog=!0},closeUpdateAdminAccountDialog:function(t){this.updateAdminAccountFrom={AdminName:"",AdminFlag:"",AdminAvatar:""},this.openUpdateAdminAccountDialog=!1,this.$refs[t].resetFields()},updateAdminAccount:function(t){var a=this;this.$refs[t].validate(function(e){if(!e)return console.log("error submit!!"),!1;var n=a.$loading({lock:!0,text:"正在更新管理员账号中",background:"rgba(0, 0, 0, 0.2)"});o.o(a.updateAdminAccountFrom).then(function(e){0===e.data.code?(a.$message.success(e.data.message),n.close(),a.closeUpdateAdminAccountDialog(t),a.getAllAcount()):(a.$message.error(e.data.message),n.close())}).catch(function(){a.$message.error("更新管理员账号失败，请重试"),n.close()})})}}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("right-content",[e("div",{staticClass:"account-content"},[e("div",{staticClass:"card add-admin-account",on:{click:function(a){t.openAddAdminAccountDialog=!0}}},[e("i",{staticClass:"iconfont icon-jia1"})]),t._v(" "),t._l(t.adminAccountList,function(a,n){return e("div",{key:n,staticClass:"card"},[e("div",{staticClass:"card-header",style:{backgroundImage:"url(http://localhost:3000/"+a.AdminAvatar+")"}}),t._v(" "),e("div",{staticClass:"card-bottom"},[e("div",{staticClass:"card-bottom-left"},[e("i",{staticClass:"iconfont",class:"3"===a.AdminFlag?"icon-level3":"2"===a.AdminFlag?"icon-level2":"icon-level1"}),t._v(" "),e("h2",{staticClass:"text-24-R"},[t._v(t._s(a.AdminName))])]),t._v(" "),e("div",{staticClass:"card-bottom-right"},[e("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-text":"启用","inactive-text":"禁用"},on:{change:function(e){t.adminStatusChange(a.AdminStatus,a.AdminId)}},model:{value:a.AdminStatus,callback:function(e){t.$set(a,"AdminStatus",e)},expression:"item.AdminStatus"}}),t._v(" "),e("div",{staticClass:"card-bottom-right-handle"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.openUpdateAdminAccountDialogFn(a)}}},[t._v("编辑")]),t._v(" "),e("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){t.deleteAdminAccount(a.AdminId)}}},[t._v("删除")])],1)],1)])])}),t._v(" "),e("el-dialog",{attrs:{"custom-class":"my-el-dialog",visible:t.openAddAdminAccountDialog,width:"420px",top:"120px"},on:{"update:visible":function(a){t.openAddAdminAccountDialog=a}}},[e("div",{staticClass:"handle-title text-16-M"},[t._v("\n        添加管理员账号\n      ")]),t._v(" "),e("div",{staticClass:"add-account-content add-account-from"},[e("el-form",{ref:"addAccountFrom",attrs:{model:t.newAdminAccountFrom,rules:t.newAdminAccountFromRules,"label-position":"left","label-width":"100px","hide-required-asterisk":""}},[e("div",{staticClass:"from-item"},[e("el-form-item",{attrs:{label:"管理员昵称",prop:"AdminName"}},[e("div",{staticClass:"item-input"},[e("el-input",{attrs:{placeholder:"请输入昵称或者姓名"},model:{value:t.newAdminAccountFrom.AdminName,callback:function(a){t.$set(t.newAdminAccountFrom,"AdminName",a)},expression:"newAdminAccountFrom.AdminName"}})],1)])],1),t._v(" "),e("div",{staticClass:"from-item"},[e("el-form-item",{attrs:{label:"管理员账号",prop:"AdminAccount"}},[e("div",{staticClass:"item-input"},[e("el-input",{attrs:{placeholder:"请输入邮箱为账号"},model:{value:t.newAdminAccountFrom.AdminAccount,callback:function(a){t.$set(t.newAdminAccountFrom,"AdminAccount",a)},expression:"newAdminAccountFrom.AdminAccount"}})],1)])],1),t._v(" "),e("div",{staticClass:"from-item"},[e("el-form-item",{attrs:{label:"账号密码",prop:"AdminPwd"}},[e("div",{staticClass:"item-input"},[e("el-input",{attrs:{placeholder:"请输入密码",readonly:!0},model:{value:t.newAdminAccountFrom.AdminPwd,callback:function(a){t.$set(t.newAdminAccountFrom,"AdminPwd",a)},expression:"newAdminAccountFrom.AdminPwd"}})],1)])],1),t._v(" "),e("div",{staticClass:"from-item"},[e("el-form-item",{attrs:{label:"管理员等级"}},[e("div",{staticClass:"item-input"},[e("el-select",{model:{value:t.newAdminAccountFrom.AdminFlag,callback:function(a){t.$set(t.newAdminAccountFrom,"AdminFlag",a)},expression:"newAdminAccountFrom.AdminFlag"}},t._l(t.AdminFlagSelect,function(t){return e("el-option",{key:t.AdminFlag,attrs:{label:t.label,value:t.AdminFlag}})}),1)],1)])],1),t._v(" "),e("div",{staticClass:"from-item"},[e("el-form-item",{attrs:{label:"上传头像"}},[e("div",{staticClass:"item-input img-bg"},[e("el-upload",{ref:"uploadsAvatar",staticClass:"avatar-uploader",attrs:{action:"http://localhost:3000/api/admin/upload",data:{uploadDir:"adminAvatar"},"show-file-list":!1,"on-success":t.handleAvatarSuccess,"on-error":t.uploadsError,"on-change":t.uploadActive,"before-upload":t.beforeAvatarUpload}},[t.newAdminAccountFrom.AdminAvatar?e("img",{staticClass:"avatar",attrs:{src:"http://localhost:3000/"+t.newAdminAccountFrom.AdminAvatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)])],1)])],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.closeAddAdminAccountDialog("addAccountFrom")}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addAdminAccount("addAccountFrom")}}},[t._v("确 定")])],1)]),t._v(" "),e("el-dialog",{attrs:{"custom-class":"my-el-dialog",visible:t.openUpdateAdminAccountDialog,width:"420px",top:"120px"},on:{"update:visible":function(a){t.openUpdateAdminAccountDialog=a}}},[e("div",{staticClass:"handle-title text-16-M"},[t._v("\n        更新管理员账号\n      ")]),t._v(" "),e("div",{staticClass:"add-account-content add-account-from"},[e("el-form",{ref:"updateAccountFrom",attrs:{model:t.updateAdminAccountFrom,rules:t.newAdminAccountFromRules,"label-position":"left","label-width":"100px","hide-required-asterisk":""}},[e("div",{staticClass:"from-item"},[e("el-form-item",{attrs:{label:"管理员昵称",prop:"AdminName"}},[e("div",{staticClass:"item-input"},[e("el-input",{attrs:{placeholder:"请输入昵称或者姓名"},model:{value:t.updateAdminAccountFrom.AdminName,callback:function(a){t.$set(t.updateAdminAccountFrom,"AdminName",a)},expression:"updateAdminAccountFrom.AdminName"}})],1)])],1),t._v(" "),e("div",{staticClass:"from-item"},[e("el-form-item",{attrs:{label:"管理员等级"}},[e("div",{staticClass:"item-input"},[e("el-select",{model:{value:t.updateAdminAccountFrom.AdminFlag,callback:function(a){t.$set(t.updateAdminAccountFrom,"AdminFlag",a)},expression:"updateAdminAccountFrom.AdminFlag"}},t._l(t.AdminFlagSelect,function(t){return e("el-option",{key:t.AdminFlag,attrs:{label:t.label,value:t.AdminFlag}})}),1)],1)])],1),t._v(" "),e("div",{staticClass:"from-item"},[e("el-form-item",{attrs:{label:"上传头像"}},[e("div",{staticClass:"item-input img-bg"},[e("el-upload",{ref:"uploadsAvatar",staticClass:"avatar-uploader",attrs:{data:{uploadDir:"adminAvatar"},action:"http://localhost:3000/api/admin/upload","show-file-list":!1,"on-success":t.updateHandleAvatarSuccess,"on-error":t.uploadsError,"on-change":t.uploadActive,"before-upload":t.beforeAvatarUpload}},[t.updateAdminAccountFrom.AdminAvatar?e("img",{staticClass:"avatar",attrs:{src:"http://localhost:3000/"+t.updateAdminAccountFrom.AdminAvatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)])],1)])],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.closeUpdateAdminAccountDialog("updateAccountFrom")}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.updateAdminAccount("updateAccountFrom")}}},[t._v("确 定")])],1)])],2)])},staticRenderFns:[]};var r=e("VU/8")(d,l,!1,function(t){e("ORDV")},"data-v-212d0f18",null);a.default=r.exports}});
//# sourceMappingURL=10.2abbc7a137ded8c52cdf.js.map